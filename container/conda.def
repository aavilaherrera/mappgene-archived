Bootstrap: docker
From: ubuntu:18.04

%post
    MINICONDA=https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh

    apt-get -y update
    apt-get install -y wget locales
    locale-gen en_US.UTF-8
    wget --no-check-certificate $MINICONDA
    sh Miniconda3-latest-Linux-x86_64.sh -b -p /opt/miniconda
    PATH=$PATH:/opt/miniconda/bin
    conda init bash
    conda create -n V-pipe -c conda-forge -c bioconda python=3.8 snakemake-minimal=5.14.0

%environment
    export PATH=$PATH:/opt/miniconda/bin
    conda init bash
    source $HOME/.bashrc
    conda activate V-pipe